---
layout: post
title:  "UT Intro"
date:   2024-10-10 00:00:00 +0000
excerpt_image: /assets/images/UT/ä¼ä¸šå¾®ä¿¡æˆªå›¾_17286183596184.png
categories: BuildSystem
tags: [BuildSystem, Qt, Software Engineering]
---

## èƒŒæ™¯é¢„ç ”

é›†æˆUTéœ€å…ˆäº†è§£ä¸šå†…å¸¸è§`driven development`æ¨¡å¼, [å‚è€ƒ](https://www.cprime.com/resources/blog/tdd-vs-bdd-vs-atdd/)

1ï¸âƒ£: TDD(Test-driven development) å¼ºè°ƒå¼€å‘åœ¨`å¼€å‘é˜¶æ®µ`å®Œæˆçº¢è‰²â¤ï¸ï¸>ç»¿è‰²ğŸ’š>é‡æ„æµç¨‹, ä¿®æ”¹å¤±è´¥çš„çº¢è‰²â¤ï¸å•å…ƒæµ‹è¯•æ”¹è‡³ç»¿è‰²ğŸ’šé€šè¿‡ã€ç„¶ååœ¨ç»¿è‰²ğŸ’šçš„å‰æä¸‹é‡æ„ç®€åŒ–é€»è¾‘, æµ‹è¯•ä¸ç¼–ç åŒæ­¥é¢å‘éå¼€å‘äººå‘˜ä¸å‹å¥½.

2ï¸âƒ£: BDD(Behavior-Driven Development) å¼ºè°ƒä¸šåŠ¡ä¸“å®¶åœ¨`å¼€å‘å‰`ç¼–å†™`Behavior Script`, å¼€å‘ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å®ç°`Behavior Script`(æµ‹è¯•å¤§çº²).é€šè¿‡ä¸šåŠ¡ä¸“å®¶çš„`è¡Œä¸ºè„šæœ¬æ¨åŠ¨`(é€šè¿‡ç±»ä¼¼[Gherkin]ruè½¯ä»¶åˆ¶ä½œ(https://cucumber.io/docs/gherkin/reference/))å¼€å‘.

3ï¸âƒ£: ATDD(Acceptance-Test-Driven Development) å¼ºè°ƒä¸šåŠ¡ä¸“å®¶ã€å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜åˆä½œç¼–å†™æµ‹è¯•, åŸºäºTDDå’ŒBDD. ä¸šåŠ¡ä¸“å®¶BDDåˆ¶å®šæ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½`Behavior Script`, å¼€å‘å®ŒæˆTDD, æµ‹è¯•å®Œæˆæ›´é«˜ä¼˜å…ˆçº§ã€é›†æˆåº¦æ›´é«˜çš„UIè‡ªåŠ¨åŒ–æµ‹è¯•.

> åŸºäºå›¢é˜Ÿå†…éƒ¨çš„åŸºç¡€å»ºè®¾å…ˆé‡‡ç”¨TDDæ¨¡å¼, éšç€åŸºå»ºçš„é€æ­¥å®Œå–„æ…¢æ…¢è¿‡æ¸¡åˆ°BDDã€ATDD

TDD UTéœ€æ±‚(æ¡Œé¢å®¢æˆ·ç«¯APP):

- 1.Basic GUI testing é‡è¦ç¨‹åº¦****** æ¡Œé¢å®¢æˆ·ç«¯appUTå¿…é¡»èƒ½æ¨¡æ‹Ÿé”®ç›˜é¼ æ ‡äº‹ä»¶
- 2.Lightweight
- 3.æ”¯æŒCmakeç”Ÿæ€æ–¹ä¾¿æ‰©å±•
- 4.æ”¯æŒGUIæ‰©å±•, æ–¹ä¾¿åç»­åœ¨GuiæŸ¥çœ‹UTæŠ¥è¡¨
- 5.Thread-safety
- 6.BDD
  
[Catch2](https://github.com/catchorg/Catch2) å½“ä¸‹C++å¼€æºç¤¾åŒºè¾ƒæ´»è·ƒå¼ºå¤§çš„UT, [Qt Test](https://doc.qt.io/qt-5/qttest-index.html)
çŸ­æœŸé›†æˆ`Qt Test`éœ€è¦ä½¿ç”¨`Qt test` `Basic GUI`ç›¸å…³ç»„ä»¶æ¨¡æ‹Ÿguiæ“ä½œ, å¹¶ä¸”å…¼å®¹Cmakeç”Ÿæ€åæœŸå†é›†æˆ3æ–¹UT.`Qt test`åº•å±‚ä¹Ÿé›†æˆäº†`Catch2`

## QTesté›†æˆ

â­• [Qml](https://doc.qt.io/qt-5/qtquicktest-index.html)ã€[test Case](https://doc.qt.io/qt-6/qml-qttest-testcase.html#details)ã€[signalspy](https://doc.qt.io/qt-6/qml-qttest-signalspy.html#details)

âºï¸ [C++](https://doc.qt.io/qt-6/qttest-index.html)

## a brief discussion of testing approaches

å¸¸è§çš„æµ‹è¯•å½¢å¼ä¸æ¦‚å¿µ:

- `smoke tests`(å†’çƒŸæµ‹è¯•): ä»¥`å¼€å‘è§†è§’`æµ‹è¯•è½¯ä»¶æ˜¯å¦å¯ä»¥ç¼–è¯‘ã€è¿è¡Œæ—¶æ˜¯å¦å´©æºƒ
  - [å‚è€ƒ](https://www.browserstack.com/guide/smoke-testing)
- `white-box testing`(ç™½ç›’æµ‹è¯•):  ä»¥`å¼€å‘è§†è§’`åœ¨CI/CDæµæ°´çº¿æ—©æœŸé˜¶æ®µ, è¿›è¡Œå…¨é‡ä»£ç è¦†ç›–ç‡çš„å•å…ƒæµ‹è¯•
  - [å‚è€ƒ](https://www.checkpoint.com/cyber-hub/cyber-security/what-is-white-box-testing/)
- `black-box testing`(é»‘ç›’æµ‹è¯•):  ä»¥`ç”¨æˆ·è§†è§’`åœ¨CI/CDæµæ°´çº¿ä¸­æœŸé˜¶æ®µ, é«˜åŠŸèƒ½è¦†ç›–ç‡çš„å•å…ƒæµ‹è¯•
  - [å‚è€ƒ](https://www.checkpoint.com/cyber-hub/cyber-security/what-is-white-box-testing/)
- `regression testing`(å›å½’æµ‹è¯•): ä»¥`ç”¨æˆ·è§†è§’`åœ¨CI/CDæµæ°´çº¿åæœŸé˜¶æ®µ, å…¨é‡çš„åŠŸèƒ½é›†æˆæµ‹è¯•
  - [å‚è€ƒ](https://www.browserstack.com/guide/regression-testing)

---

## æ€»ç»“

å®¢æˆ·ç«¯æµ‹UTä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†:

1ï¸âƒ£: `smoke test`: `ctest`è´Ÿè´£æ„å»ºã€è¿è¡Œç›¸å…³çš„æµ‹è¯•
2ï¸âƒ£: `white-box testing`: `Qt Test`è´Ÿè´£ä¸šåŠ¡ã€æ¥å£ç›¸å…³çš„é€»è¾‘æµ‹è¯•
3ï¸âƒ£: `black-box testing`: `Qt Quick Test`è´Ÿè´£æ¨¡æ‹ŸGUIæ“ä½œçš„åŠŸèƒ½æµ‹è¯•
4ï¸âƒ£: `regression testing`: (å¯é€‰æš‚å®šä¸ºå†…éƒ¨çš„guiæµ‹è¯•å·¥å…·)

## è¿è¡Œ

- å‘½ä»¤è¡Œè¿è¡Œ: å‘½ä»¤è¡Œè¿è¡Œéœ€è¦æŒ‡å®š`--test-dir`

  1ï¸âƒ£generate: `cmake -S . -B build -G "Visual Studio 15 2017" -A Win32`
  
  2ï¸âƒ£build % install: `cmake --build ./build --config Release --target INSTALL`
  
  3ï¸âƒ£testing: `ctest [-VV] -C Debug --test-dir ./build` 

- QTcreator: é€‰æ‹©è¿è¡Œå®Œæˆåè‡ªåŠ¨æ‰§è¡Œtesting

  ![Alt text](/assets/images/UT/image-1.png)
  
- VS2017: æ‰¹ç”Ÿæˆå‹¾é€‰ä¸Štestç›¸å…³
  
![Alt text](/assets/images/UT/image-2.png)

![Alt text](/assets/images/UT/image-3.png)